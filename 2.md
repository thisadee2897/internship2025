```sql

CREATE OR REPLACE FUNCTION project_data.fn_get_back_log_json(
        _user_id character varying,
        _language character varying,
        _project_id character varying
    ) RETURNS json LANGUAGE plpgsql AS $function$
DECLARE response_result json;
user_data RECORD;
export_excel BOOLEAN DEFAULT FALSE;
BEGIN -- Attempt to get user data based on token
SELECT json_agg(t.result_object) INTO response_result
FROM (
        SELECT json_build_object(
                'table_name',
                'project_hd',
                'id',
                x.sprint_id::text,
                'name',
                x.sprint_name,
                'duration',
                x.sprint_duration,
                'satart_date',
                x.sprint_start_date,
                'end_date',
                x.sprint_end_date,
                'goal',
                x.sprint_goal,
                'completed',
                x.sprint_completed,
                'count_status',
                (
                    SELECT json_agg(
                            json_build_object(
                                'table_name',
                                'master_task_status',
                                'id',
                                y.master_task_status_id::TEXT,
                                'name',
                                y.master_task_status_name,
                                'description',
                                y.master_task_status_description,
                                'color',
                                y.master_task_status_color,
                                'active',
                                y.master_task_status_active,
                                'count',
                                (
                                    SELECT COUNT(*)
                                    FROM project_data.task AS z
                                    WHERE z.master_task_status_id = y.master_task_status_id
                                    AND z.sprint_id = x.sprint_id
                                    AND z.project_hd_id = _project_id::BIGINT
                                )
                            )
                            ORDER BY y.master_task_status_id
                        )
                    FROM master_data_all.master_task_status AS y
                ),
                'tasks',
                (
                    project_data.fn_get_task_by_sprint_json(
                        _user_id,
                        _language,
                        x.sprint_id::text,
                        _project_id
                    )->'data'
                ),
                'project_hd',
                (
                    SELECT json_build_object(
                            'id',
                            p.project_hd_id::text,
                            'name',
                            p.project_hd_name
                        )
                    FROM project_data.project_hd AS p
                    WHERE p.project_hd_id = x.project_hd_id
                ),
                'created_at',
                x.sprint_created_at,
                'updated_at',
                x.sprint_updated_at,
                'created_by',
                (
                    SELECT json_build_object(
                            'id',
                            u.master_user_id::text,
                            'name',
                            u.master_user_name
                        )
                    FROM master_data.master_user AS u
                    WHERE u.master_user_id = x.sprint_created_by
                ),
                'updated_by',
                (
                    SELECT json_build_object(
                            'id',
                            u.master_user_id::text,
                            'name',
                            u.master_user_name
                        )
                    FROM master_data.master_user AS u
                    WHERE u.master_user_id = x.sprint_updated_by
                ),
                'active',
                x.sprint_active,
                'startting',
                x.sprint_startting
            ) AS result_object
        FROM project_data.sprint AS x
        WHERE x.project_hd_id = _project_id::BIGINT
            AND x.sprint_completed = FALSE
            OR x.project_hd_id IS NULL
        ORDER BY x.is_backlog ASC,
            x.sprint_created_at ASC
    ) AS t;
RETURN json_build_object(
    'status',
    200,
    'data',
    COALESCE(response_result, '[]'::json)
);
END;
$function$
```


sadsdsdsadsad
sadsadssad
adassadad